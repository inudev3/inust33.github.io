---
title: '백준 1504 특정한 최단경로'
categories: ['Algorithm', 'BOJ']
date: '2021-12-21'
summary: '백준 1504번 문제를 푼 풀이를 공유해봅니다.'
thumbnail: './img_2.png'
---

백준 1504번 문제의 설명은 다음과 같다.
    
    방향성이 없는 그래프가 주어진다. 세준이는 1번 정점에서 N번 정점으로 최단 거리로 이동하려고 한다.
    또한 세준이는 두 가지 조건을 만족하면서 이동하는 특정한 최단 경로를 구하고 싶은데, 
    그것은 바로 임의로 주어진 두 정점은 반드시 통과해야 한다는 것이다.
    세준이는 한번 이동했던 정점은 물론, 한번 이동했던 간선도 다시 이동할 수 있다. 하지만 반드시 최단 경로로 이동해야 한다는 사실에 주의하라.
    1번 정점에서 N번 정점으로 이동할 때,  주어진 두 정점을 반드시 거치면서 최단 경로로 이동하는 프로그램을 작성하시오.

문제에서 주의할 점은 방향성이 없는 그래프라는 점이다. 즉, 간선을 입력받을 때, 어떠한 두점 A,B와 가중치 C를 입력받는 다면
인접리스트 형태로 구현할 graph 배열에는 양 A,B 꼭짓점 모두에 대해 간선을 추가해줘야 한다..

위 문제에서 헷갈릴 수 있는 부분은 주어진 두 정점을 통과해야 하며, 이동했던 정점과 간선도 다시 이동할 수 있다는 부분인데,
반드시 최단경로로 이동해야 한다는 조건을 잘 해석하면 어떠한 통과해야할 정점이 주어졌을 때 , 즉 A라는 정점이 주어졌다고 하면

시작점->A

A->마지막 노드

까지의 부분 경로마다 매번 최단경로를 찾으며 이동해야한다는 것을 알면 어렵지 않게 풀 수 있다.
즉 주어진 두 정점을 통과하는 최단경로의 경우의 수를 모두 계산하고, 그 중 최소길이의 경로를 구하면 된다.

최단경로의 계산은 주어진 가중치의 조건 c가 1<=c<=1000이므로 양수만 가능하기 때문에 Dijkstra 알고리즘으로 수행할 수 있다..


```python3
# 특정한 최단경로
import heapq
from sys import stdin

MAX = 801 #가능한 간선의 최대값
INF = 987654321 # 
V, E = list(map(int, stdin.readline().split()))

graph = [[] for _ in range(V + 1)]


for _ in range(E):
    a, b, c = map(int, stdin.readline().split())
    graph[a].append((c, b)) ##간선은 양방향으로 입력받는다.
    graph[b].append((c, a))
A, B = list(map(int, stdin.readline().split()))


def dijkstra(start):
    dist = [INF] * (V + 1) ##최대값으로 초기화한다.
    q = []
    heapq.heappush(q, (0, start)) ##우선순위 큐를 사용한다.
    dist[start] = 0
    while q:
        curdist, now = heapq.heappop(q)
        if dist[now] < curdist:
            continue     
        for j in graph[now]:
            nextDist, next = j
            if curdist + nextDist < dist[next]:
                dist[next] = curdist + nextDist
                heapq.heappush(q, (nextDist, next))
    return dist


fromS = dijkstra(1)
fromA = dijkstra(A)
fromB = dijkstra(B)

res = INF
if fromA[B]== INF or fromB[A] == INF:
    print(-1)
path1 = fromS[A]+fromA[B]+fromB[V]
path2 = fromS[B]+fromB[A]+fromA[V]
res = min(path1, path2)
print(res)


